<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-2">
<link rel="stylesheet" type="text/css" href="style.css">
<title>Programowanie rozproszone w Javie - technologia RMI</title>
</head>


<body>

         
<h1>RMI - æwiczenie trzecie</h1>
       
<b>Dynamiczne ³adowanie klas w RMI</b>


<h2>Dlaczego?</h2>

<p>Wprowadzeniem jest proste æwiczenie oparte na przyk³adzie Echo z poprzednich
zadañ. Przed wykonaniem æwiczenia w celu lepszej demonstracji przenie¶my pliki
klienta Echo (<b>Echo.class</b> oraz <b>EchoClient.class</b>) do odrêbnego
katalogu tak, aby na pewno nie mia³ on dostêpu do pliku <i>Stub</i> serwera.
Nastêpnie nale¿y:

<ol>
  <li>Upewniæ siê, ¿e zmienna ¶rodowiskowa <i>CLASSPATH</i> jest pusta (nie
  istnieje)
  <li>Uruchomiæ <b>rmiregistry</b> bêd±c w jakimkolwiek katalogu nie
  zawieraj±cym klasy <b>EchoServer_Stub.class</b>
  <li>Przej¶æ do katalogu w którym znajduj± siê pliki serwera i zarejestrowaæ
  go w rejestrze:
  
  <p class=command>
java -Djava.security.policy=java.policy -Djava.rmi.server.codebase="file:`pwd`/"
EchoServer echo123
  </p>
  
  <li>W odrêbnej konsoli przej¶æ do katalogu gdzie przenie¶li¶my pliki klienta
  i uruchomiæ go w standardowy sposób:

  <p class=command>
java -Djava.security.policy=java.policy EchoClient echo123 Hi
  </p>
</ol>

W wyniku tak przeprowadzonego æwiczenia otrzymujamy wyj±tek wynikaj±cy z
braku prawa dostêpu klienta do fizycznych plików serwera (w specyfikacji
<b>java.policy</b> udostêpniali¶my jedynie po³±czenia na portach). Jest to
tym bardziej zrozumie³e kiedy obie JVM dzia³aj± na odrêbnych maszynach.



<h2>U¿ycie protoko³u HTTP w celu dynamicznego pobrania klasy</h2>

<p>Przeprowadzamy nastêpuj±ce kroki</p>
<ol>
  <li>Wygenerowany plik stuba <b>EchoServer_Stub.class</b> oraz skompilowany
  interfejs <b>Echo.class</b> przemieszczamy do katalogu w którym mo¿e je
  udostêpniæ Web Server (kopiê pliku interfejsu warto zostawiæ tak¿e
  w starym katalogu aby móg³ j± znale¼æ sam serwer)
  
  <p class=command>
  cp EchoServer_Stub.class ~/../pub<br>
  cp Echo.class ~/../pub<br>
  </p>
  
  <li>Umo¿liwiamy publiczny dostêp do wspomnianych plików

  <p class=command>
  chmod a+r ~/../pub/*.class
  </p>
  
  Teraz oba pliki powinny byæ dostêpne poprzez protokó³ HTTP pod adresem
  <b>http://artemis.wszib.edu.pl/~<i>userlogin</i>/</b>.
</ol>


<p> Teraz mo¿emy powtórzyæ poprzednie, nieudane æwiczenie, przekazuj±c
odpowiedni parametr jako ¼ród³o plików klas:</p>

<p class=command>
java -Djava.rmi.server.codebase="http://artemis.wszib.edu.pl/~userlogin/"
-Djava.security.policy=java.policy EchoServer //komp0404/echoserver
</p>

Po udanym zarejestrowaniu siê serwera mo¿na sprawdziæ jego dzia³anie poprzez
klienta Echo:</p>

<p class=command>
java -Djava.security.policy=java.policy  EchoClient //komp0404/echoserver Hello
</p>

 
<hr>

<i>Tomasz Guba³a</i>

</body>
</html>
